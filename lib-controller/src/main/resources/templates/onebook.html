<!DOCTYPE HTML>
<html xmlns:th="http://thymeleaf.org" lang="en"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<title>Library - Book page</title>
<link href="../css/styles.css" rel="stylesheet" />
<link href="../css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	<h1>Book details:</h1>
	<a href="http://localhost:8080/books/">All books</a>
	<br>
	<a href="http://localhost:8080">Home</a>
	<br>
	<a href="http://localhost:8080/books/addbook">Add book</a>
	<br />

	<img th:src="@{${book.bookDetailsDto.picture}}" height="200"
		alt="Cover" />

	<table>
		<tbody>
			<tr>
				<td>Book ISBN</td>
				<td th:text="${book.isbn}"></td>
			</tr>
			<tr>
				<td>Book Available</td>
				<td th:text="${book.quantityAvailable}"></td>
			</tr>
			<tr>
				<td>Rating</td>
				<td th:text="${#numbers.formatDecimal(book.rating,1,2)}"></td>
			</tr>
			<tr>
				<td>Department</td>
				<td><span th:each="department : ${book.departments}"> <span
						th:text="${department.name}"> </span>
				</span></td>
			</tr>
			<tr>
				<td>Name</td>
				<td th:text="${book.bookDetailsDto.name}"></td>
			</tr>

			<tr>
				<td>Author</td>
				<td th:text="${book.bookDetailsDto.author}"></td>
			</tr>
			<tr>
				<td>Description</td>
				<td th:text="${book.bookDetailsDto.description}"></td>
			</tr>
			<tr>
				<td>Name</td>
				<td th:text="${book.bookDetailsDto.name}"></td>
			</tr>

			<tr>
				<td><a sec:authorize="isAuthenticated()"
					th:href="@{'edit/' + ${book.id}}">Edit</a> <br> <a
					sec:authorize="hasRole('ADMIN')"
					th:href="@{'delete/' + ${book.id}}">Delete</a> <br> <a
					sec:authorize="isAuthenticated()"
					th:href="@{'../orders/addorder/' + ${book.id}}">Make order</a> <br></td>
		</tbody>
	</table>
	<hr>
	<h3>Feedbacks:</h3>
	<div class="container" th:each="feedback : ${listFeedbacks}">
		<img
			th:src="@{'http://localhost:8080/img/' + ${feedback.userName} + '.png'}"
			alt="Avatar" style="width: 90px">
		<p>
			<span th:text="${feedback.userName}"></span><span
				th:text="${feedback.rating}"></span>
		</p>
		<p th:text="${feedback.comment}"></p>
	</div>

</body>
<hr>
<a href="javascript:history.back()">Go back</a>
</html>